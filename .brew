#!/bin/bash

# Ask for the administrator password upfront.
sudo -v

# Keep-alive: update existing `sudo` time stamp until the script has finished.
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

# Make sure we’re using the latest Homebrew
brew update

# Upgrade any already-installed formulae
brew upgrade --all

# Install GNU core utilities (those that come with OS X are outdated)
# From https://www.topbug.net/blog/2013/04/14/install-and-use-gnu-command-line-tools-in-mac-os-x/
brew install coreutils
brew install moreutils
brew install gnu-tar --with-default-names
# alternatively
brew install binutils
brew install diffutils
brew install ed --with-default-names
brew install findutils --with-default-names
brew install gawk
brew install gnu-indent --with-default-names
brew install gnu-sed --with-default-names
brew install gnu-which --with-default-names
brew install gnutls
brew install grep --with-default-names
brew install gzip
brew install screen
brew install watch
brew install wdiff --with-gettext
brew install wget
echo "Don’t forget to add $(brew --prefix coreutils)/libexec/gnubin to \$PATH."
sudo ln -s /usr/local/bin/gsha256sum /usr/local/bin/sha256sum

# Install wget with IRI support
brew install wget --with-iri

# Install zsh and utils
brew install zsh
curl -L http://install.ohmyz.sh | sh

# Install Bash 4
brew install bash
sudo rm /bin/bash
sudo ln -s /usr/local/bin/bash /bin/bash
brew tap homebrew/versions
brew install bash-completion2

# Install more recent versions of some OS X tools
brew install vim --with-override-system-vi
brew install homebrew/dupes/grep
brew install homebrew/dupes/openssh
brew install homebrew/dupes/screen
brew install homebrew/php/php56 --with-gmp

# Install font tools.
brew tap bramstein/webfonttools
brew install sfnt2woff
brew install sfnt2woff-zopfli
brew install woff2

# Python and Pip
brew install python
brew install python@2
pip install -U pip
pip install Pygments

# node and npm
brew install node
brew postinstall node
npm install --global clipboard-cli
npm install --global gnomon
npm install --global n
npm install --global npm
npm install --global pretty-bytes
npm install --global pure-prompt
npm install --global share-cli
npm install --global sort-json
npm install --global speed-test
npm install --global trash-cli
npm install --global vtop
npm install --global yo

# gcc/g++ compilers
brew install gcc
brew link gcc

# Install everything else
brew install ack
brew install bat
brew install cabal-install
brew install cppcheck
brew install ctags
brew install dark-mode
brew install diff-so-fancy
brew install entr
brew install ffmpeg
brew install git
brew install graphicsmagick
brew install hub
brew install imagemagick --with-webp
brew install jq
brew install p7zip
brew install peco
brew install pigz
brew install pv
brew install rename
brew install ruby
brew install shellcheck
brew install testssl
brew install tree
brew install youtube-dl

# Remove outdated versions from the cellar
brew cleanup
